---
title: Нулевое слияние и нулевое присваивание
parent: "Продвинутный синтаксис"
layout: default
---



# Нулевое слияние

Оператор нулевого слияния `??` возвращает тот операнд, который не `null \ undefined`. Пример:

```java
let username = "Alice";
alert(username ?? "Аноним");  // Выведет Alice
```

```javascript
let username;  // <-- undefined
alert(username ?? "Аноним");  // Выведет Аноним
```

Этот оператор аналог такой конструкции:

```javascript
result = a ?? b;
result = (a !== null && a !== undefined) ? a : b;
```

У него довольно низкий приоритет (3), поэтому часто используется со скобками.

# Отличие от ||

Отличие заключается в том, что `??` срабатывает только на null \ undefined. А `||` не отличает null \ undefined от 0, false, "".

Иначе говоря:

* `??` возвращает первое *определенное* значение.
* `||` возвращает первое *истинное* значение.

Примеры:

```javascript
let height = 0;
let defaultHeight = 100;

let h1 = height || defaultHeight;  // h1 стало 100.
let h2 = height ?? defaultHeight;  // h2 стало 0.
```

В данном примере height имеет вполне нормальное значение 0. Это не значит, что высота не определена, она именно равняется нулю. Однако `||` меняет ее, что является неподходящим поведением.

# Совместное использование с || и &&

В одном выражении использовать `??` с `||` и `&&` можно только если отделять их явно скобками:

```javascript
let a = 1 && 2 ?? 3;    // Ошибка синтакса.
let b = (1 && 2) ?? 3;  // Ок.
```

# Нулевое присваивание, ??=

Оператор `??=` позволяет проверить переменную на null \ undefined и в этом случае присвоить ей заданное значение. Иначе говоря, если значение у переменной уже есть, оно остается как было, а если значения нет, то происходит присваивание. Пример:

```javascript
let username;  // undefined
username ??= "Аноним";  // username стало "Аноним", т.к. было undefined
```

```javascript
let username = "Alice";
username ??= "Аноним";  // username осталось "Alice"
```


